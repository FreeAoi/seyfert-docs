---
title: Eventos Personalizados
---
:::tip
Como en otras secciones, se usará la [ampliación de módulos](/getting-started/declare-module), recomendamos leerla primero.
:::

Seyfert permite cargar, integrar y ejecutar eventos personalizados que pueden ser llamados desde cualquier lugar. En este ejemplo se pondrá en práctica el uso de [módulos de música](/recipes/music).

## Integración
:::danger
Ten en cuenta que pueden existir eventos con el mismo nombre. En tiempo de ejecución, estos serán sobrescritos.
:::

Debes asegurarte de declarar los eventos que existan, para ello definimos los tipos:

```ts title="index.ts"
import type { ShoukakuEvents } from 'shoukaku';

type MappedEvents = {
    [K in keyof Omit<ShoukakuEvents, 'ready' | 'raw'>]: (...params: ShoukakuEvents[K]) => never;
};

declare module "seyfert" {
	interface CustomEvents extends MappedEvents {
		shoukakuReady: (...params: ShoukakuEvents['ready']) => never;
		shoukakuRaw: (...params: ShoukakuEvents['raw']) => never;
	}
}
```

### Cargando eventos

No necesitas hacer nada especial; simplemente coloca tus eventos en la carpeta designada en `seyfert.config`.

```ts title="events/music/ready.ts"
import { createEvent } from 'seyfert';

export default createEvent({
	data: { name: "shoukakuReady", once: true },
	run: (name) => {
		console.log(`Lavalink ${name}: ¡Listo!`);
	}
});
```

## Ejecución

```ts title="index.ts" {3,28,30-32,38-40}
import { Client } from "seyfert";
import { Kazagumo } from "kazagumo";
import type { ShoukakuEvents } from 'shoukaku';
import { type NodeOption, Connectors } from "shoukaku";

const client = new Client();
const nodes: NodeOption[] = [
	{
		name: "Node",
		url: "localhost:2333",
		auth: "youshallnotpass",
		secure: false
	}
];

// Configuración básica, perfecta para este caso
client.kazagumo = new Kazagumo(
	{
		defaultSearchEngine: "youtube",
		send: (guildId, payload) =>
			client.gateway.send(client.gateway.calculateShardId(guildId), payload)
	},
	new Connectors.Seyfert(client),
	nodes
);

// Para verificar si el nodo está conectado
client.kazagumo.shoukaku.on("ready", (...args) => client.events?.runCustom('ready', ...args));

type MappedEvents = {
    [K in keyof Omit<ShoukakuEvents, 'ready' | 'raw'>]: (...params: ShoukakuEvents[K]) => never;
};

declare module "seyfert" {
	interface Client {
		kazagumo: Kazagumo;
	}
	interface CustomEvents extends MappedEvents {
		shoukakuReady: (...params: ShoukakuEvents['ready']) => never;
		shoukakuRaw: (...params: ShoukakuEvents['raw']) => never;
	}
}

client.start().then(() => client.uploadCommands());
```
